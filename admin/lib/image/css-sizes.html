<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><title>test css sizes</title><script src="load-image.all.min.js"></script><script src="EventEmitter.js"></script><script src="ImageSelectElement-new.js"></script><script src="CropElement-new.js"></script><style>* {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    .wrapper {
      width: 20%;
      display: block;
      position: relative;
      font-size: 0;
    }
    .cover {
      position: relative;
      width: 100%;
      height: 100%;
    }
    .cover:after {
      content: '';
      display: block;
      padding-top: 100%;
    }
    .outer {
      width: 100%;
      background: green;
      height: auto;
      position: relative;
      padding: 10%;
    }
    .outer:after {
      content: '';
      display: block;
      position: absolute;
      top: 0;
      left: 0;
      bottom: 0;
      right: 0;
      z-index: 3;
      background: linear-gradient(to right, rgba(255 , 255, 255, .5) 0, rgba(255 , 255, 255, .5) 10%, transparent 10%, transparent 90%, rgba(255 , 255, 255, .5) 90%, rgba(255 , 255, 255, .5) 100%), linear-gradient(to top, rgba(255 , 255, 255, .5) 0, rgba(255 , 255, 255, .5) 10%, transparent 10%, transparent 90%, rgba(255 , 255, 255, .5) 90%, rgba(255 , 255, 255, .5) 100%);
    }
    .inner {
      background-color: red;
      height: auto;
      z-index: 2;
      position: absolute;
      top: 10%;
      left: 10%;
      bottom: 10%;
      right: 10%;
    }
    canvas {
      position: relative;
    }</style></head><body><button>Click me</button><div class="wrapper"><div class="outer"><div class="inner"></div><div class="cover"></div></div><button class="save">SAVE</button> <img src="" alt="" class="image"></div><script>var imageSelectElement = new ImageSelectElement(document.querySelector('button'), {editable: true});
    var cropElement = new CropElement(document.querySelector('.outer'), {ratio: 1, width: 400, left: 0.1, top: 0.1, right: 0.1, bottom: 0.1}, document.body, document.querySelector('.inner')); 
    var image =  document.querySelector('.image');

    imageSelectElement.addEventListener(ImageSelectElement.ERROR, function(reason) {
      alert(reason);
    });
    imageSelectElement.addEventListener(ImageSelectElement.SUCCESS, function(canvas) {
      cropElement.set(canvas);
    });
    document.querySelector('.save').addEventListener('click', function() {
      image.src = cropElement.get();
    });</script></body></html>